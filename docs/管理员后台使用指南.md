# ç‚Šè¯­æ™ºèƒ½èœå•ç”Ÿæˆç³»ç»Ÿ - ç®¡ç†å‘˜åå°ä½¿ç”¨æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è§ˆ](#ç³»ç»Ÿæ¦‚è§ˆ)
2. [è®¿é—®æ–¹å¼](#è®¿é—®æ–¹å¼)
3. [é»˜è®¤è´¦å·](#é»˜è®¤è´¦å·)
4. [åŠŸèƒ½æ¨¡å—](#åŠŸèƒ½æ¨¡å—)
5. [å¼€å‘è¿›åº¦](#å¼€å‘è¿›åº¦)
6. [APIæ–‡æ¡£](#apiæ–‡æ¡£)
7. [éƒ¨ç½²è¯´æ˜](#éƒ¨ç½²è¯´æ˜)

---

## ç³»ç»Ÿæ¦‚è§ˆ

ç®¡ç†å‘˜åå°æ˜¯ç‚Šè¯­æ™ºèƒ½èœå•ç”Ÿæˆç³»ç»Ÿçš„åå°ç®¡ç†å¹³å°ï¼Œç”¨äºï¼š
- ç›‘æ§ç³»ç»Ÿè¿è¥æ•°æ®
- ç®¡ç†é—¨åº—è´¦å·
- æŸ¥çœ‹å’Œç®¡ç†èœå•åº“ã€èœå“åº“
- å¯¼å…¥å¯¼å‡ºæ•°æ®
- å®¡è®¡æ—¥å¿—æŸ¥çœ‹
- ç³»ç»Ÿè®¾ç½®

### è®¾è®¡åŸåˆ™
- **ç‰©ç†éš”ç¦»**ï¼šä½¿ç”¨ç‹¬ç«‹åŸŸå `admin.ai-menu.tech`ï¼ˆå¼€å‘ç¯å¢ƒï¼š`localhost:3000/admin`ï¼‰
- **ç®€æ´ä¸“ä¸š**ï¼šéµå¾ªPRDä¸­çš„UIè®¾è®¡é£æ ¼ï¼Œé€‚é…æ•°æ®å¯†é›†å‹åœºæ™¯
- **æƒé™æ§åˆ¶**ï¼šç‹¬ç«‹çš„ç®¡ç†å‘˜è®¤è¯ç³»ç»Ÿ
- **è½¯åˆ é™¤**ï¼šæ‰€æœ‰åˆ é™¤æ“ä½œä¸ºè½¯åˆ é™¤ï¼Œæ•°æ®ä¿ç•™ç”¨äºå®¡è®¡

---

## è®¿é—®æ–¹å¼

### å¼€å‘ç¯å¢ƒ
```
http://localhost:3000/admin/login
```

### ç”Ÿäº§ç¯å¢ƒ
```
https://admin.ai-menu.tech
```
> æ³¨æ„ï¼šç”Ÿäº§ç¯å¢ƒéœ€è¦é€šè¿‡Nginxé…ç½®åŸŸåæ˜ å°„

---

## é»˜è®¤è´¦å·

### ç®¡ç†å‘˜è´¦å·
- **è´¦å·**ï¼š`admin`
- **å¯†ç **ï¼š`admin123`
- **é‚®ç®±**ï¼š`admin@ai-menu.tech`

âš ï¸ **å®‰å…¨æç¤º**ï¼š
1. é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹å¯†ç 
2. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰åŠ¡å¿…æ›´æ¢é»˜è®¤å¯†ç 
3. å»ºè®®è®¾ç½®å¼ºå¯†ç ï¼ˆè‡³å°‘8ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ï¼‰

### åˆ›å»ºæ–°ç®¡ç†å‘˜è´¦å·

ä½¿ç”¨è„šæœ¬åˆ›å»ºï¼š
```bash
cd backend
npx tsx scripts/create-admin.ts <username> <password> [fullName] [email]

# ç¤ºä¾‹
npx tsx scripts/create-admin.ts john john2024 "John Smith" "john@ai-menu.tech"
```

---

## åŠŸèƒ½æ¨¡å—

### 1. æ¦‚è§ˆçœ‹æ¿ (Dashboard) âœ…
**è·¯å¾„**ï¼š`/admin/dashboard`

**åŠŸèƒ½**ï¼š
- ğŸ“Š KPIå¡ç‰‡
  - æ´»è·ƒé—¨åº—æ•°
  - æ–°å¢é—¨åº—æ•°
  - ç”Ÿæˆèœå•æ•°
  - ä¸Šä¼ èœå•æ•°
  - é—¨åº—ç•™å­˜ç‡
  - å¤±è´¥ç‡

- ğŸ“ˆ å›¾è¡¨å±•ç¤ºï¼ˆå¼€å‘ä¸­ï¼‰
  - æ—¶é—´åºåˆ—æŠ˜çº¿å›¾ï¼šç”Ÿæˆ vs ä¸Šä¼ èœå•
  - å…«å¤§çƒ¹é¥ªæ³•åˆ†å¸ƒ
  - è¾£åº¦æ¡£ä½å æ¯”
  - ç»“æ„åˆ†å¸ƒï¼ˆä¸»è¤/åŠè¤/ç´ /å‡‰ï¼‰

- ğŸ” ç­›é€‰å™¨
  - æ—¶é—´ç»´åº¦ï¼šæœ€è¿‘7å¤©/30å¤©/90å¤©/è‡ªå®šä¹‰åŒºé—´
  - é—¨åº—ç­›é€‰
  - æ¥æºç­›é€‰ï¼ˆuploaded/generatedï¼‰

### 2. é—¨åº—ç®¡ç† (Stores) ğŸš§
**è·¯å¾„**ï¼š`/admin/stores`

**è®¡åˆ’åŠŸèƒ½**ï¼š
- é—¨åº—åˆ—è¡¨ï¼ˆåˆ†é¡µã€æœç´¢ã€ç­›é€‰ï¼‰
- æ–°å¢é—¨åº—
- ç¼–è¾‘é—¨åº—ä¿¡æ¯
- ä¿®æ”¹é—¨åº—åˆå§‹åŒ–é…ç½®
- å¯ç”¨/ç¦ç”¨é—¨åº—
- è½¯åˆ é™¤é—¨åº—
- æ‰¹é‡å¯¼å…¥/å¯¼å‡ºé—¨åº—

### 3. èœå•åº“ (Menus) ğŸš§
**è·¯å¾„**ï¼š`/admin/menus`

**è®¡åˆ’åŠŸèƒ½**ï¼š
- èœå•åˆ—è¡¨ï¼ˆåˆ†é¡µã€æœç´¢ã€ç­›é€‰ï¼‰
- æŸ¥çœ‹èœå•è¯¦æƒ…
- æŸ¥çœ‹gen_options_jsonå’Œmenu_stats_json
- å¯¼å‡ºèœå•ï¼ˆExcel/CSV/JSONï¼‰
- è½¯åˆ é™¤èœå•

### 4. èœå“åº“ (Dishes) ğŸš§
**è·¯å¾„**ï¼š`/admin/dishes`

**è®¡åˆ’åŠŸèƒ½**ï¼š
- èœå“åˆ—è¡¨ï¼ˆä»…å±•ç¤ºdishes_storeï¼‰
- æŸ¥çœ‹èœå“è¯¦æƒ…å’Œæ ‡ç­¾
- èœå“åˆå¹¶å·¥å…·
- è½¯åˆ é™¤èœå“
- å¯¼å‡ºèœå“æ¸…å•

### 5. è´¦å·ç®¡ç† (Accounts) ğŸš§
**è·¯å¾„**ï¼š`/admin/accounts`

**è®¡åˆ’åŠŸèƒ½**ï¼š
- è´¦å·åˆ—è¡¨
- æ–°å¢è´¦å·
- ä¿®æ”¹è´¦å·/å¯†ç 
- å¯ç”¨/ç¦ç”¨è´¦å·
- è½¯åˆ é™¤è´¦å·

### 6. å®¡è®¡æ—¥å¿— (Audit Log) ğŸš§
**è·¯å¾„**ï¼š`/admin/audit`

**è®¡åˆ’åŠŸèƒ½**ï¼š
- æ—¥å¿—åˆ—è¡¨ï¼ˆ90å¤©ç•™å­˜ï¼‰
- æŒ‰ç±»å‹/æ“ä½œè€…/æ—¶é—´ç­›é€‰
- å¯¼å‡ºå®¡è®¡æ—¥å¿—

### 7. å¯¼å…¥å¯¼å‡º (Import/Export) ğŸš§
**è·¯å¾„**ï¼š`/admin/import-export`

**è®¡åˆ’åŠŸèƒ½**ï¼š
- Excelå¯¼å…¥ï¼ˆé—¨åº—ã€èœå•ï¼‰
- æ•°æ®å¯¼å‡ºï¼ˆé—¨åº—æ¸…å•ã€èœå•æ˜ç»†ã€èœå“æ¸…å•ï¼‰
- æ¨¡æ¿ä¸‹è½½

### 8. APIè®¿é—® (API Tokens) ğŸš§
**è·¯å¾„**ï¼š`/admin/api-tokens`

**è®¡åˆ’åŠŸèƒ½**ï¼š
- ç”Ÿæˆåªè¯»Token
- Tokenç®¡ç†ï¼ˆç¦ç”¨ã€åˆ é™¤ï¼‰
- APIæ–‡æ¡£æŸ¥çœ‹
- é™æµè®¾ç½®

### 9. ç³»ç»Ÿè®¾ç½® (Settings) ğŸš§
**è·¯å¾„**ï¼š`/admin/settings`

**è®¡åˆ’åŠŸèƒ½**ï¼š
- è½¯åˆ é™¤æ˜¾ç¤ºå¼€å…³
- ä¸‹è½½æƒé™å¼€å…³
- è§£æå¤±è´¥é€šçŸ¥è®¾ç½®

---

## å¼€å‘è¿›åº¦

### å·²å®Œæˆ âœ…
- [x] ç®¡ç†å‘˜åå°åŸºç¡€å¸ƒå±€ï¼ˆå·¦ä¾§å¯¼èˆª+å†…å®¹åŒºï¼‰
- [x] ç®¡ç†å‘˜ç™»å½•é¡µé¢å’Œè®¤è¯
- [x] åç«¯ç®¡ç†å‘˜è®¤è¯API
- [x] Dashboardæ¦‚è§ˆçœ‹æ¿ï¼ˆåŸºç¡€ç‰ˆï¼‰
- [x] æ•°æ®åº“admin_usersè¡¨åˆ›å»º
- [x] åˆ›å»ºç®¡ç†å‘˜è´¦å·è„šæœ¬

### è¿›è¡Œä¸­ ğŸš§
- [ ] Dashboardå›¾è¡¨åŠŸèƒ½
- [ ] é—¨åº—ç®¡ç†é¡µé¢
- [ ] èœå•åº“é¡µé¢
- [ ] èœå“åº“é¡µé¢

### å¾…å¼€å‘ ğŸ“
- [ ] è´¦å·ç®¡ç†
- [ ] å®¡è®¡æ—¥å¿—
- [ ] å¯¼å…¥å¯¼å‡º
- [ ] APIè®¿é—®
- [ ] ç³»ç»Ÿè®¾ç½®

---

## APIæ–‡æ¡£

### è®¤è¯ç›¸å…³

#### POST /api/admin/login
ç®¡ç†å‘˜ç™»å½•

**è¯·æ±‚ä½“**ï¼š
```json
{
  "username": "admin",
  "password": "admin123"
}
```

**å“åº”**ï¼š
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": "uuid",
    "username": "admin",
    "fullName": "ç³»ç»Ÿç®¡ç†å‘˜",
    "email": "admin@ai-menu.tech"
  }
}
```

### Dashboardç›¸å…³

#### GET /api/admin/dashboard/stats
è·å–Dashboardç»Ÿè®¡æ•°æ®

**è¯·æ±‚å¤´**ï¼š
```
Authorization: Bearer <token>
```

**æŸ¥è¯¢å‚æ•°**ï¼š
- `from` (å¯é€‰): å¼€å§‹æ—¥æœŸï¼Œå¦‚ `2024-01-01`
- `to` (å¯é€‰): ç»“æŸæ—¥æœŸï¼Œå¦‚ `2024-01-31`

**å“åº”**ï¼š
```json
{
  "activeStores": 12,
  "newStores": 3,
  "generatedMenus": 45,
  "uploadedMenus": 28,
  "retention": "85%",
  "failureRate": "2.3%"
}
```

### é—¨åº—ç®¡ç†

#### GET /api/admin/stores
è·å–é—¨åº—åˆ—è¡¨

**è¯·æ±‚å¤´**ï¼š
```
Authorization: Bearer <token>
```

**æŸ¥è¯¢å‚æ•°**ï¼š
- `page` (å¯é€‰ï¼Œé»˜è®¤1): é¡µç 
- `pageSize` (å¯é€‰ï¼Œé»˜è®¤50): æ¯é¡µæ•°é‡
- `search` (å¯é€‰): æœç´¢å…³é”®è¯

**å“åº”**ï¼š
```json
{
  "stores": [
    {
      "id": "uuid",
      "store_name": "æµ‹è¯•é£Ÿå ‚",
      "username": "test_user",
      "is_active": true,
      "created_at": "2024-01-01T00:00:00Z",
      "generated_count": 10,
      "uploaded_count": 5,
      "last_active_at": "2024-01-15T00:00:00Z"
    }
  ],
  "total": 100,
  "page": 1,
  "pageSize": 50
}
```

---

## éƒ¨ç½²è¯´æ˜

### å¼€å‘ç¯å¢ƒ
1. ç¡®ä¿åç«¯æœåŠ¡è¿è¡Œåœ¨ `localhost:8080`
2. ç¡®ä¿å‰ç«¯æœåŠ¡è¿è¡Œåœ¨ `localhost:3000`
3. è®¿é—® `http://localhost:3000/admin/login`

### ç”Ÿäº§ç¯å¢ƒ

#### 1. Nginxé…ç½®
```nginx
# ç®¡ç†å‘˜åå°ï¼ˆadmin.ai-menu.techï¼‰
server {
    listen 80;
    server_name admin.ai-menu.tech;
    
    # é‡å®šå‘åˆ°HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name admin.ai-menu.tech;
    
    # SSLè¯ä¹¦é…ç½®
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    # å‰ç«¯é™æ€èµ„æº
    location / {
        root /path/to/frontend/build;
        try_files $uri $uri/ /index.html;
    }
    
    # APIä»£ç†
    location /api/ {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

#### 2. ç¯å¢ƒå˜é‡é…ç½®
ç¡®ä¿åç«¯ `.env` æ–‡ä»¶åŒ…å«ï¼š
```env
NODE_ENV=production
JWT_SECRET=<your-production-secret>
DATABASE_URL=<your-production-db-url>
```

#### 3. å®‰å…¨å»ºè®®
- ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç 
- å¯ç”¨HTTPS
- é…ç½®é˜²ç«å¢™è§„åˆ™
- è®¾ç½®JWT_SECRETä¸ºå¼ºéšæœºå­—ç¬¦ä¸²
- å®šæœŸå¤‡ä»½æ•°æ®åº“
- é™åˆ¶ç®¡ç†å‘˜IPè®¿é—®ï¼ˆå¯é€‰ï¼‰

---

## å¸¸è§é—®é¢˜

### Q: å¿˜è®°ç®¡ç†å‘˜å¯†ç æ€ä¹ˆåŠï¼Ÿ
A: ä½¿ç”¨è„šæœ¬é‡ç½®ï¼š
```bash
cd backend
npx tsx scripts/create-admin.ts admin new_password
```

### Q: å¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ï¼Ÿ
A: åç«¯æ—¥å¿—ä½ç½®ï¼š
- å¼€å‘ç¯å¢ƒï¼šæ§åˆ¶å°è¾“å‡º
- ç”Ÿäº§ç¯å¢ƒï¼š`logs/app.log`ï¼ˆéœ€é…ç½®ï¼‰

### Q: å¦‚ä½•æ·»åŠ æ–°çš„ç®¡ç†å‘˜ï¼Ÿ
A: ä½¿ç”¨è„šæœ¬ï¼š
```bash
npx tsx scripts/create-admin.ts <username> <password> [fullName] [email]
```

### Q: ä¸ºä»€ä¹ˆDashboardæ•°æ®ä¸å‡†ç¡®ï¼Ÿ
A: éƒ¨åˆ†æŒ‡æ ‡ï¼ˆå¦‚ç•™å­˜ç‡ã€å¤±è´¥ç‡ï¼‰æš‚æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œå¾…åç»­ç‰ˆæœ¬å®Œå–„ã€‚

---

## æŠ€æœ¯æ ˆ

**å‰ç«¯**ï¼š
- Next.js 14
- React
- TypeScript
- Shadcn/ui
- Lucide Icons

**åç«¯**ï¼š
- Node.js
- Fastify
- PostgreSQL
- JWT
- Bcrypt

**éƒ¨ç½²**ï¼š
- Nginx
- PM2
- SSL/TLS

---

## æ›´æ–°æ—¥å¿—

### v0.1.0 (2024-11-05)
- âœ… ç®¡ç†å‘˜åå°åŸºç¡€æ¡†æ¶æ­å»º
- âœ… ç®¡ç†å‘˜ç™»å½•å’Œè®¤è¯
- âœ… DashboardåŸºç¡€ç‰ˆ
- âœ… å·¦ä¾§å¯¼èˆªèœå•
- âœ… è·¯ç”±ä¿æŠ¤

### v0.2.0 (2024-11-09)
- âœ… é—¨åº—ç®¡ç†å®Œæ•´åŠŸèƒ½ï¼ˆåˆ—è¡¨ã€æ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤ã€æœç´¢ã€åˆ†é¡µï¼‰
- âœ… èœå•åº“ç®¡ç†ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ã€åˆ é™¤ã€æœç´¢ã€ç­›é€‰ã€åˆ†é¡µï¼‰
- âœ… èœå“åº“ç®¡ç†ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ã€åˆ é™¤ã€æœç´¢ã€ç­›é€‰ã€åˆ†é¡µï¼‰

### è®¡åˆ’ä¸­
- v0.3.0: é—¨åº—åˆå§‹åŒ–é…ç½®ã€èœå“åˆå¹¶ã€å¯¼å‡ºåŠŸèƒ½
- v0.4.0: å®¡è®¡æ—¥å¿—å’Œå¯¼å…¥å¯¼å‡º
- v1.0.0: å®Œæ•´åŠŸèƒ½å‘å¸ƒ

---

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»ï¼š
- é‚®ç®±ï¼šadmin@ai-menu.tech
- é¡¹ç›®åœ°å€ï¼šhttps://github.com/your-repo/ai-menu

---

**æœ€åæ›´æ–°**: 2024-11-05
**æ–‡æ¡£ç‰ˆæœ¬**: v0.1.0

