# 🧪 前端功能测试指南

## ✅ 后端API测试已通过

- ✅ HTTPS API正常：`https://api.ai-menu.tech/health`
- ✅ 数据库连接正常
- ✅ OSS存储正常
- ✅ SSL证书有效

---

## 📋 前端功能测试清单

### 准备工作

1. **打开浏览器**（Chrome或Edge）
2. **按F12打开开发者工具**
3. **保持开发者工具打开**（监控API调用）

---

### 测试1：用户前端 - 注册功能

1. 访问：https://app.ai-menu.tech
2. 点击"开始使用"或"注册"按钮
3. 填写注册信息：
   - 门店名称：测试门店001
   - 联系人：测试
   - 手机号：13800138000
   - 用户名：test001
   - 密码：Test123456

**预期结果**：
- ✅ 注册成功，跳转到下一步（上传历史菜单）
- ✅ 开发者工具Console没有红色错误
- ✅ Network标签能看到API调用成功（绿色200状态）

**如果失败**：
- 📸 截图Console的错误信息
- 📸 截图Network标签的失败请求
- 📝 记录错误描述

---

### 测试2：用户前端 - 登录功能

1. 访问：https://app.ai-menu.tech/login
2. 输入刚才注册的用户名和密码
3. 点击登录

**预期结果**：
- ✅ 登录成功，进入主界面
- ✅ 能看到用户名显示在页面上
- ✅ Console没有错误

---

### 测试3：文件上传功能

1. 登录后，点击"上传历史菜单"
2. 选择一个Excel文件
3. 点击上传

**预期结果**：
- ✅ 文件上传成功
- ✅ 显示解析进度
- ✅ 解析完成后能看到菜品列表

**检查点**：
- Network标签能看到：
  - POST `/api/menu/upload` → 200 OK
  - GET `/api/menu/parse-status` → 200 OK

---

### 测试4：AI菜单生成功能

1. 上传并解析完菜品后
2. 配置菜品类型（荤菜、素菜等）
3. 点击"生成菜单"

**预期结果**：
- ✅ AI开始生成
- ✅ 等待30秒-1分钟
- ✅ 生成成功，显示菜单
- ✅ 可以下载Excel

**检查点**：
- Console能看到DeepSeek API调用
- Network能看到 `/api/menu/generate` 请求

---

### 测试5：管理后台 - 登录

1. 访问：https://admin.ai-menu.tech/admin/login
2. 使用管理员账号登录：
   - 用户名：admin
   - 密码：[您的管理员密码]

**预期结果**：
- ✅ 登录成功
- ✅ 进入Dashboard
- ✅ 能看到统计数据

---

### 测试6：管理后台 - 各个模块

依次点击测试：
- [ ] Dashboard - 数据统计正常显示
- [ ] 菜品管理 - 列表正常加载
- [ ] 菜单管理 - 历史记录正常
- [ ] 门店管理 - 门店列表正常
- [ ] 用户管理 - 用户列表正常

---

## 🐛 常见问题处理

### 问题1：CORS错误

**现象**：Console显示 "Access to fetch ... has been blocked by CORS policy"

**解决**：
1. SSH登录ECS
2. 检查后端.env的CORS配置：
   ```bash
   grep CORS_ORIGIN /opt/ai-menu/backend/.env
   ```
3. 应该显示：
   ```
   CORS_ORIGIN=https://app.ai-menu.tech,https://admin.ai-menu.tech
   ```
4. 如果不对，修改后重启：
   ```bash
   pm2 restart ai-menu-backend
   ```

---

### 问题2：API请求超时

**现象**：Network显示请求pending很久，最后失败

**检查**：
1. ECS后端是否运行：
   ```bash
   ssh root@8.140.9.139
   pm2 status
   ```
2. Nginx是否运行：
   ```bash
   systemctl status nginx
   ```

---

### 问题3：SSL证书错误

**现象**：浏览器提示"您的连接不是私密连接"

**解决**：
1. 检查证书是否过期：
   ```bash
   ssh root@8.140.9.139
   certbot certificates
   ```
2. 如果快过期，续期：
   ```bash
   certbot renew
   ```

---

## ✅ 测试通过标准

当以下所有项都打勾，说明迁移完全成功：

- [ ] 用户注册功能正常
- [ ] 用户登录功能正常
- [ ] 文件上传功能正常
- [ ] AI菜单生成功能正常
- [ ] 管理后台登录正常
- [ ] Dashboard数据显示正常
- [ ] 所有管理功能正常
- [ ] Console没有错误
- [ ] Network所有API调用成功

---

## 🎉 测试完成后

如果所有测试都通过，请运行：

```bash
cd /Users/apple/ai-menu-100
./完整测试脚本.sh
```

生成最终的测试报告！

---

## 📞 遇到问题？

如果任何测试失败：
1. 📸 截图错误信息（Console + Network）
2. 📝 记录失败的步骤
3. 📤 发送给开发者

我会立即帮您解决！

